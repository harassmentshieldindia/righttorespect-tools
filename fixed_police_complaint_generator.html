<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Police Complaint Generator | पुलिस शिकायत जनरेटर | Right to Respect</title>
    <meta name="description" content="Generate legally formatted police complaints for harassment cases in English and Hindi">
    <meta name="keywords" content="police complaint, harassment, legal help, FIR, Indian law, women safety">
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #ff6b6b;
            --success-color: #00b894;
            --warning-color: #fdcb6e;
            --error-color: #e74c3c;
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --bg-glass: rgba(255, 255, 255, 0.25);
            --bg-glass-dark: rgba(255, 255, 255, 0.1);
            --shadow-primary: 0 8px 32px rgba(31, 38, 135, 0.37);
            --shadow-hover: 0 15px 35px rgba(31, 38, 135, 0.5);
            --border-glass: 1px solid rgba(255, 255, 255, 0.18);
            --backdrop-blur: blur(20px);
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --font-primary: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        body {
            font-family: var(--font-primary);
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            pointer-events: none;
            z-index: 1;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: var(--bg-glass);
            backdrop-filter: var(--backdrop-blur);
            border-radius: 25px;
            border: var(--border-glass);
            box-shadow: var(--shadow-primary);
            overflow: hidden;
            position: relative;
            z-index: 2;
            animation: slideUp 0.8s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            background: linear-gradient(135deg, var(--accent-color), #ee5a24);
            color: white;
            padding: 50px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shimmer 3s infinite;
            pointer-events: none;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .accessibility-skip {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--text-primary);
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 4px;
            z-index: 1000;
            transition: var(--transition-smooth);
        }

        .accessibility-skip:focus {
            top: 6px;
        }

        .language-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--bg-glass-dark);
            backdrop-filter: var(--backdrop-blur);
            border: var(--border-glass);
            color: white;
            padding: 12px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition-smooth);
            z-index: 10;
        }

        .language-toggle:hover,
        .language-toggle:focus {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .header h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }

        .header p {
            font-size: clamp(1rem, 3vw, 1.2rem);
            opacity: 0.95;
            margin-bottom: 8px;
            position: relative;
            z-index: 2;
        }

        .form-container {
            padding: 50px 40px;
        }

        .language-selector {
            margin-bottom: 30px;
            text-align: center;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .lang-btn {
            background: var(--bg-glass);
            backdrop-filter: var(--backdrop-blur);
            color: var(--text-primary);
            border: var(--border-glass);
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .lang-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: var(--transition-smooth);
        }

        .lang-btn:hover::before,
        .lang-btn:focus::before {
            left: 100%;
        }

        .lang-btn.active {
            background: linear-gradient(135deg, var(--success-color), #27ae60);
            color: white;
            transform: scale(1.05);
            box-shadow: var(--shadow-hover);
        }

        .lang-btn:hover,
        .lang-btn:focus {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .section {
            margin-bottom: 35px;
            padding: 30px;
            background: var(--bg-glass);
            backdrop-filter: var(--backdrop-blur);
            border: var(--border-glass);
            border-radius: 20px;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color), var(--success-color));
            border-radius: 20px 20px 0 0;
        }

        .section:hover,
        .section:focus-within {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .section h3 {
            color: var(--text-primary);
            margin-bottom: 25px;
            font-size: 1.4rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 25px;
            position: relative;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .required-field::after {
            content: ' *';
            color: var(--error-color);
            font-weight: bold;
        }

        input, select, textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 15px;
            font-size: 1rem;
            background: rgba(255,255,255,0.9);
            backdrop-filter: var(--backdrop-blur);
            transition: var(--transition-smooth);
            font-family: var(--font-primary);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }

        input:invalid {
            border-color: var(--error-color);
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(255,255,255,0.5);
            border-radius: 12px;
            transition: var(--transition-smooth);
        }

        .checkbox-item:hover {
            background: rgba(255,255,255,0.7);
            transform: translateY(-2px);
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--success-color);
        }

        .generate-btn {
            background: linear-gradient(135deg, var(--success-color), #27ae60);
            color: white;
            border: none;
            padding: 18px 50px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: block;
            margin: 40px auto;
            box-shadow: var(--shadow-primary);
            position: relative;
            overflow: hidden;
        }

        .generate-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: var(--transition-smooth);
        }

        .generate-btn:hover::before,
        .generate-btn:focus::before {
            left: 100%;
        }

        .generate-btn:hover,
        .generate-btn:focus {
            transform: translateY(-3px) scale(1.02);
            box-shadow: var(--shadow-hover);
        }

        .generate-btn:active {
            transform: translateY(-1px) scale(0.98);
        }

        .output {
            margin-top: 50px;
            padding: 40px;
            background: var(--bg-glass);
            backdrop-filter: var(--backdrop-blur);
            border: var(--border-glass);
            border-radius: 20px;
            border-left: 6px solid var(--success-color);
            display: none;
            animation: slideUp 0.5s ease-out;
        }

        .output h3 {
            color: var(--text-primary);
            margin-bottom: 25px;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .complaint-text {
            background: rgba(255,255,255,0.95);
            backdrop-filter: var(--backdrop-blur);
            padding: 30px;
            border-radius: 15px;
            line-height: 1.8;
            font-size: 1rem;
            border: var(--border-glass);
            white-space: pre-line;
            max-height: 500px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
        }

        .complaint-text::-webkit-scrollbar {
            width: 8px;
        }

        .complaint-text::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
        }

        .complaint-text::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        .copy-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            margin: 15px 10px 0 0;
            font-weight: 600;
            transition: var(--transition-smooth);
        }

        .copy-btn:hover,
        .copy-btn:focus {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .warning {
            background: linear-gradient(135deg, var(--warning-color), #f39c12);
            color: #8b4513;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 6px solid #e67e22;
            font-weight: 600;
            box-shadow: var(--shadow-primary);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .error-message {
            background: var(--error-color);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            display: none;
            animation: slideUp 0.3s ease-out;
        }

        .success-message {
            background: var(--success-color);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            display: none;
            animation: slideUp 0.3s ease-out;
        }

        .loading-spinner {
            display: none;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .focus-visible {
            outline: 3px solid var(--primary-color);
            outline-offset: 2px;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 20px;
            }
            
            .header {
                padding: 40px 25px;
            }
            
            .form-container {
                padding: 30px 25px;
            }
            
            .language-toggle {
                position: static;
                margin-bottom: 20px;
                display: inline-block;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .language-selector {
                flex-direction: column;
                align-items: center;
            }
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text-primary: #ecf0f1;
                --text-secondary: #bdc3c7;
                --bg-glass: rgba(0, 0, 0, 0.25);
                --bg-glass-dark: rgba(0, 0, 0, 0.4);
            }
        }

        @media (prefers-contrast: high) {
            :root {
                --border-glass: 2px solid #000;
            }
            
            .section {
                border: 2px solid var(--text-primary);
            }
        }

        @media print {
            body {
                background: white;
                color: black;
            }
            
            .container {
                background: white;
                box-shadow: none;
                border: none;
            }
            
            .header {
                background: white;
                color: black;
            }
            
            .language-toggle, .generate-btn, .copy-btn {
                display: none;
            }
        }
    </style>
</head>
<body role="document">
    <a href="#main-content" class="accessibility-skip">Skip to main content</a>

    <div class="container" role="main">
        <header class="header">
            <button class="language-toggle" onclick="toggleLanguage()" aria-label="Toggle language between English and Hindi" accesskey="l">
                <span id="langToggleText">हिंदी में बदलें</span>
            </button>
            <h1>Police Complaint Generator | पुलिस शिकायत जनरेटर</h1>
            <p>Generate legally formatted complaints for harassment cases</p>
            <p>उत्पीड़न मामलों के लिए कानूनी रूप से प्रारूपित शिकायत तैयार करें</p>
            <p><strong>अपनी भाषा में शिकायत दर्ज करें | File complaint in your language</strong></p>
        </header>
        
        <div class="form-container" id="main-content">
            <section class="language-selector" role="group" aria-labelledby="lang-selector-heading">
                <h2 id="lang-selector-heading" class="sr-only">Choose complaint language</h2>
                <button class="lang-btn active" id="englishBtn" onclick="setOutputLanguage('english')" aria-pressed="true">
                    English Complaint
                </button>
                <button class="lang-btn" id="hindiBtn" onclick="setOutputLanguage('hindi')" aria-pressed="false">
                    हिंदी शिकायत
                </button>
                <button class="lang-btn" id="bilingualBtn" onclick="setOutputLanguage('bilingual')" aria-pressed="false">
                    Bilingual (English + Hindi)
                </button>
            </section>
            
            <div class="warning" role="alert">
                <strong>Legal Disclaimer | कानूनी अस्वीकरण:</strong> This tool generates template complaints for reference only. Always consult with a legal professional and customize according to your specific case details. | यह उपकरण केवल संदर्भ के लिए टेम्प्लेट शिकायत तैयार करता है। हमेशा किसी कानूनी पेशेवर से सलाह लें और अपने विशिष्ट मामले के अनुसार इसे संशोधित करें।
            </div>
            
            <div class="error-message" id="errorMessage" role="alert" aria-live="assertive"></div>
            <div class="success-message" id="successMessage" role="alert" aria-live="polite"></div>
            
            <form id="complaintForm" novalidate>
                <section class="section" role="group" aria-labelledby="personal-info-heading">
                    <h3 id="personal-info-heading">Personal Information | व्यक्तिगत जानकारी</h3>
                    <div class="grid">
                        <div class="form-group">
                            <label for="complainantName" class="required-field">Your Full Name | आपका पूरा नाम</label>
                            <input type="text" id="complainantName" name="complainantName" required aria-describedby="name-help" autocomplete="name">
                            <div id="name-help" class="sr-only">Enter your full legal name as it appears on official documents</div>
                        </div>
                        <div class="form-group">
                            <label for="complainantAge" class="required-field">Age | आयु</label>
                            <input type="number" id="complainantAge" name="complainantAge" required min="18" max="120" aria-describedby="age-help">
                            <div id="age-help" class="sr-only">Enter your age in years, minimum 18</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="complainantAddress" class="required-field">Complete Address | पूरा पता</label>
                        <textarea id="complainantAddress" name="complainantAddress" required 
                                placeholder="घर संख्या, गली, क्षेत्र, शहर, राज्य, पिन कोड | House No., Street, Area, City, State, PIN Code"
                                aria-describedby="address-help"></textarea>
                        <div id="address-help" class="sr-only">Enter your complete residential address including PIN code</div>
                    </div>
                    <div class="grid">
                        <div class="form-group">
                            <label for="complainantPhone" class="required-field">Phone Number | फोन नंबर</label>
                            <input type="tel" id="complainantPhone" name="complainantPhone" required 
                                   pattern="[0-9]{10}" aria-describedby="phone-help" autocomplete="tel">
                            <div id="phone-help" class="sr-only">Enter your 10-digit mobile number</div>
                        </div>
                        <div class="form-group">
                            <label for="complainantEmail">Email Address | ईमेल पता</label>
                            <input type="email" id="complainantEmail" name="complainantEmail" 
                                   aria-describedby="email-help" autocomplete="email">
                            <div id="email-help" class="sr-only">Enter your email address (optional)</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="complainantOccupation">Occupation | व्यवसाय</label>
                        <input type="text" id="complainantOccupation" name="complainantOccupation" 
                               aria-describedby="occupation-help" autocomplete="organization-title">
                        <div id="occupation-help" class="sr-only">Enter your profession or occupation</div>
                    </div>
                </section>

                <section class="section" role="group" aria-labelledby="accused-info-heading">
                    <h3 id="accused-info-heading">Accused Person Details | आरोपी व्यक्ति का विवरण</h3>
                    <div class="grid">
                        <div class="form-group">
                            <label for="accusedName">Accused Name (if known) | आरोपी का नाम (यदि ज्ञात हो)</label>
                            <input type="text" id="accusedName" name="accusedName" 
                                   placeholder="पूरा नाम या 'अज्ञात व्यक्ति' | Full name or 'Unknown Person'"
                                   aria-describedby="accused-name-help">
                            <div id="accused-name-help" class="sr-only">Enter the accused person's name if known, or leave blank</div>
                        </div>
                        <div class="form-group">
                            <label for="relationship">Relationship to You | आपसे रिश्ता</label>
                            <select id="relationship" name="relationship" aria-describedby="relationship-help">
                                <option value="">Select relationship | रिश्ता चुनें</option>
                                <option value="Unknown person | अज्ञात व्यक्ति">Unknown person | अज्ञात व्यक्ति</option>
                                <option value="Colleague | सहकर्मी">Colleague | सहकर्मी</option>
                                <option value="Supervisor/Boss | पर्यवेक्षक/बॉस">Supervisor/Boss | पर्यवेक्षक/बॉस</option>
                                <option value="Neighbor | पड़ोसी">Neighbor | पड़ोसी</option>
                                <option value="Acquaintance | परिचित">Acquaintance | परिचित</option>
                                <option value="Former partner | पूर्व साथी">Former partner | पूर्व साथी</option>
                                <option value="Friend | मित्र">Friend | मित्र</option>
                                <option value="Other | अन्य">Other | अन्य</option>
                            </select>
                            <div id="relationship-help" class="sr-only">Select how you know the accused person</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="accusedAddress">Accused Address (if known) | आरोपी का पता (यदि ज्ञात हो)</label>
                        <textarea id="accusedAddress" name="accusedAddress" 
                                  placeholder="कोई भी ज्ञात पता विवरण | Any known address details"
                                  aria-describedby="accused-address-help"></textarea>
                        <div id="accused-address-help" class="sr-only">Enter any known address information about the accused person</div>
                    </div>
                </section>

                <section class="section" role="group" aria-labelledby="incident-info-heading">
                    <h3 id="incident-info-heading">Incident Information | घटना की जानकारी</h3>
                    <div class="grid">
                        <div class="form-group">
                            <label for="incidentDate" class="required-field">Date of First Incident | पहली घटना की तारीख</label>
                            <input type="date" id="incidentDate" name="incidentDate" required 
                                   aria-describedby="incident-date-help">
                            <div id="incident-date-help" class="sr-only">Select the date when the harassment incident occurred</div>
                        </div>
                        <div class="form-group">
                            <label for="incidentTime">Time of Incident | घटना का समय</label>
                            <input type="time" id="incidentTime" name="incidentTime" 
                                   aria-describedby="incident-time-help">
                            <div id="incident-time-help" class="sr-only">Select the approximate time when the incident occurred</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="incidentLocation" class="required-field">Location of Incident | घटना का स्थान</label>
                        <textarea id="incidentLocation" name="incidentLocation" required 
                                  placeholder="उत्पीड़न हुआ स्थान का सटीक विवरण | Exact location where harassment occurred"
                                  aria-describedby="incident-location-help"></textarea>
                        <div id="incident-location-help" class="sr-only">Describe the exact location where the harassment took place</div>
                    </div>
                    <div class="form-group">
                        <label for="ongoingHarassment">Is this ongoing harassment? | क्या यह निरंतर उत्पीड़न है?</label>
                        <select id="ongoingHarassment" name="ongoingHarassment" aria-describedby="ongoing-help">
                            <option value="no">Single incident | एकल घटना</option>
                            <option value="yes">Ongoing harassment | निरंतर उत्पीड़न</option>
                        </select>
                        <div id="ongoing-help" class="sr-only">Select whether this is a one-time incident or part of ongoing harassment</div>
                    </div>
                </section>

                <section class="section" role="group" aria-labelledby="harassment-type-heading">
                    <h3 id="harassment-type-heading">Type of Harassment | उत्पीड़न का प्रकार</h3>
                    <fieldset class="checkbox-group" role="group" aria-describedby="harassment-type-help">
                        <legend class="sr-only">Select all types of harassment that occurred</legend>
                        <div class="checkbox-item">
                            <input type="checkbox" id="verbal" name="harassmentType" value="verbal" aria-describedby="verbal-help">
                            <label for="verbal">Verbal Harassment | मौखिक उत्पीड़न</label>
                            <div id="verbal-help" class="sr-only">Includes abusive language, threats, or intimidating words</div>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="physical" name="harassmentType" value="physical" aria-describedby="physical-help">
                            <label for="physical">Physical Harassment | शारीरिक उत्पीड़न</label>
                            <div id="physical-help" class="sr-only">Includes unwanted physical contact or assault</div>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="sexual" name="harassmentType" value="sexual" aria-describedby="sexual-help">
                            <label for="sexual">Sexual Harassment | यौन उत्पीड़न</label>
                            <div id="sexual-help" class="sr-only">Includes unwanted sexual advances or inappropriate behavior</div>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="cyber" name="harassmentType" value="cyber" aria-describedby="cyber-help">
                            <label for="cyber">Cyber Harassment | साइबर उत्पीड़न</label>
                            <div id="cyber-help" class="sr-only">Includes online harassment through social media, email, or messaging</div>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="stalking" name="harassmentType" value="stalking" aria-describedby="stalking-help">
                            <label for="stalking">Stalking | पीछा करना</label>
                            <div id="stalking-help" class="sr-only">Includes following, watching, or persistently contacting</div>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="workplace" name="harassmentType" value="workplace" aria-describedby="workplace-help">
                            <label for="workplace">Workplace Harassment | कार्यस्थल उत्पीड़न</label>
                            <div id="workplace-help" class="sr-only">Includes harassment in professional or work environment</div>
                        </div>
                    </fieldset>
                    <div id="harassment-type-help" class="sr-only">Select all applicable types of harassment that you experienced</div>
                </section>

                <section class="section" role="group" aria-labelledby="description-heading">
                    <h3 id="description-heading">Detailed Description | विस्तृत विवरण</h3>
                    <div class="form-group">
                        <label for="incidentDescription" class="required-field">Describe the incident in detail | घटना का विस्तार से वर्णन करें</label>
                        <textarea id="incidentDescription" name="incidentDescription" required rows="6"
                                  placeholder="जो कुछ हुआ उसका विस्तृत कालानुक्रमिक विवरण दें। विशिष्ट शब्द, कार्य और आप पर प्रभाव शामिल करें। | Provide detailed chronological account of what happened. Include specific words used, actions taken, and how it affected you."
                                  aria-describedby="incident-description-help"></textarea>
                        <div id="incident-description-help" class="sr-only">Provide a detailed description of the harassment incident including what was said, what happened, and how it affected you</div>
                    </div>
                    <div class="form-group">
                        <label for="previousIncidents">Previous incidents (if any) | पूर्व घटनाएं (यदि कोई हो)</label>
                        <textarea id="previousIncidents" name="previousIncidents" rows="4"
                                  placeholder="उसी व्यक्ति द्वारा पहले की गई उत्पीड़न का वर्णन | Describe any previous harassment by the same person"
                                  aria-describedby="previous-incidents-help"></textarea>
                        <div id="previous-incidents-help" class="sr-only">Describe any previous incidents of harassment by the same person</div>
                    </div>
                </section>

                <section class="section" role="group" aria-labelledby="evidence-heading">
                    <h3 id="evidence-heading">Evidence & Witnesses | सबूत और गवाह</h3>
                    <div class="form-group">
                        <label for="witnesses">Witnesses Present | मौजूद गवाह</label>
                        <textarea id="witnesses" name="witnesses" rows="3"
                                  placeholder="किसी भी गवाह का नाम और संपर्क विवरण | Names and contact details of any witnesses"
                                  aria-describedby="witnesses-help"></textarea>
                        <div id="witnesses-help" class="sr-only">List any witnesses who saw the harassment incident with their contact information</div>
                    </div>
                    <div class="form-group">
                        <label>Evidence Available | उपलब्ध सबूत</label>
                        <fieldset class="checkbox-group" role="group" aria-describedby="evidence-help">
                            <legend class="sr-only">Select all types of evidence you have</legend>
                            <div class="checkbox-item">
                                <input type="checkbox" id="messages" name="evidence" value="messages">
                                <label for="messages">Text messages/WhatsApp | टेक्स्ट मैसेज/व्हाट्सएप</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="emails" name="evidence" value="emails">
                                <label for="emails">Emails | ईमेल</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="photos" name="evidence" value="photos">
                                <label for="photos">Photographs | फोटोग्राफ</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="videos" name="evidence" value="videos">
                                <label for="videos">Video recordings | वीडियो रिकॉर्डिंग</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="audio" name="evidence" value="audio">
                                <label for="audio">Audio recordings | ऑडियो रिकॉर्डिंग</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="documents" name="evidence" value="documents">
                                <label for="documents">Documents | दस्तावेज़</label>
                            </div>
                        </fieldset>
                        <div id="evidence-help" class="sr-only">Select all types of evidence you have to support your complaint</div>
                    </div>
                </section>

                <section class="section" role="group" aria-labelledby="police-station-heading">
                    <h3 id="police-station-heading">Police Station Details | पुलिस स्टेशन का विवरण</h3>
                    <div class="grid">
                        <div class="form-group">
                            <label for="policeStation" class="required-field">Police Station Name | पुलिस स्टेशन का नाम</label>
                            <input type="text" id="policeStation" name="policeStation" required 
                                   placeholder="पुलिस स्टेशन का नाम | Name of the police station"
                                   aria-describedby="police-station-help">
                            <div id="police-station-help" class="sr-only">Enter the name of the police station where you want to file the complaint</div>
                        </div>
                        <div class="form-group">
                            <label for="policeStationAddress">Police Station Address | पुलिस स्टेशन का पता</label>
                            <input type="text" id="policeStationAddress" name="policeStationAddress" 
                                   placeholder="पुलिस स्टेशन का पता | Address of police station"
                                   aria-describedby="police-station-address-help">
                            <div id="police-station-address-help" class="sr-only">Enter the address of the police station (optional)</div>
                        </div>
                    </div>
                </section>

                <div class="loading-spinner" id="loadingSpinner" aria-label="Generating complaint, please wait"></div>

                <button type="button" class="generate-btn" onclick="generateComplaint()" aria-describedby="generate-help">
                    Generate Police Complaint | पुलिस शिकायत तैयार करें
                </button>
                <div id="generate-help" class="sr-only">Click to generate a formatted police complaint based on the information you provided</div>
            </form>

            <div id="output" class="output" role="region" aria-labelledby="output-heading" aria-live="polite">
                <h3 id="output-heading">Generated Police Complaint | तैयार की गई पुलिस शिकायत</h3>
                <div id="complaintText" class="complaint-text" aria-label="Generated complaint text" tabindex="0"></div>
                <button class="copy-btn" onclick="copyComplaint()" aria-describedby="copy-help">
                    Copy Complaint | शिकायत कॉपी करें
                </button>
                <div id="copy-help" class="sr-only">Copy the generated complaint to clipboard</div>
                <button class="copy-btn" onclick="downloadComplaint()" style="background: linear-gradient(135deg, var(--accent-color), #c0392b);" aria-describedby="download-help">
                    Download as Text | टेक्स्ट फाइल डाउनलोड करें
                </button>
                <div id="download-help" class="sr-only">Download the complaint as a text file</div>
            </div>
        </div>
    </div>

    <script>
        // Global translation dictionaries (fixed scope issue)
        const harassmentTypesHindi = {
            'verbal': 'मौखिक उत्पीड़न',
            'physical': 'शारीरिक उत्पीड़न', 
            'sexual': 'यौन उत्पीड़न',
            'cyber': 'साइबर उत्पीड़न',
            'stalking': 'पीछा करना',
            'workplace': 'कार्यस्थल उत्पीड़न'
        };
        
        const evidenceTypesHindi = {
            'messages': 'टेक्स्ट संदेश/व्हाट्सएप',
            'emails': 'ईमेल',
            'photos': 'फोटोग्राफ',
            'videos': 'वीडियो रिकॉर्डिंग',
            'audio': 'ऑडियो रिकॉर्डिंग',
            'documents': 'दस्तावेज़'
        };

        // Error handling system
        class ErrorHandler {
            static showError(message, isHindi = false) {
                const errorElement = document.getElementById('errorMessage');
                const prefix = isHindi ? 'त्रुटि: ' : 'Error: ';
                errorElement.textContent = prefix + message;
                errorElement.style.display = 'block';
                
                setTimeout(() => {
                    errorElement.style.display = 'none';
                }, 5000);
                
                // Announce to screen readers
                this.announceToScreenReader(prefix + message);
            }

            static showSuccess(message, isHindi = false) {
                const successElement = document.getElementById('successMessage');
                const prefix = isHindi ? 'सफल: ' : 'Success: ';
                successElement.textContent = prefix + message;
                successElement.style.display = 'block';
                
                setTimeout(() => {
                    successElement.style.display = 'none';
                }, 3000);
                
                this.announceToScreenReader(prefix + message);
            }

            static announceToScreenReader(message) {
                const announcement = document.createElement('div');
                announcement.setAttribute('aria-live', 'assertive');
                announcement.setAttribute('aria-atomic', 'true');
                announcement.className = 'sr-only';
                announcement.textContent = message;
                
                document.body.appendChild(announcement);
                
                setTimeout(() => {
                    document.body.removeChild(announcement);
                }, 1000);
            }
        }

        // Global variables
        let currentLanguage = 'english';
        let outputLanguage = 'english';
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            setupAccessibility();
            setupFormValidation();
        });

        // Accessibility setup
        function setupAccessibility() {
            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (e.altKey && e.key === 'l') {
                    e.preventDefault();
                    toggleLanguage();
                }
            });

            // Focus management
            const focusableElements = document.querySelectorAll(
                'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );

            focusableElements.forEach(element => {
                element.addEventListener('focus', function() {
                    this.classList.add('focus-visible');
                });
                
                element.addEventListener('blur', function() {
                    this.classList.remove('focus-visible');
                });
            });
        }

        // Form validation setup
        function setupFormValidation() {
            const form = document.getElementById('complaintForm');
            const inputs = form.querySelectorAll('input, textarea, select');
            
            inputs.forEach(input => {
                input.addEventListener('blur', validateField);
                input.addEventListener('input', clearErrors);
            });
        }

        function validateField(event) {
            const field = event.target;
            const value = field.value.trim();
            
            if (field.hasAttribute('required') && !value) {
                field.setAttribute('aria-invalid', 'true');
                field.style.borderColor = 'var(--error-color)';
                return false;
            }
            
            if (field.type === 'email' && value && !isValidEmail(value)) {
                field.setAttribute('aria-invalid', 'true');
                field.style.borderColor = 'var(--error-color)';
                return false;
            }
            
            if (field.type === 'tel' && value && !isValidPhone(value)) {
                field.setAttribute('aria-invalid', 'true');
                field.style.borderColor = 'var(--error-color)';
                return false;
            }
            
            field.setAttribute('aria-invalid', 'false');
            field.style.borderColor = '';
            return true;
        }

        function clearErrors(event) {
            const field = event.target;
            field.setAttribute('aria-invalid', 'false');
            field.style.borderColor = '';
        }

        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function isValidPhone(phone) {
            const phoneRegex = /^[0-9]{10}$/;
            return phoneRegex.test(phone.replace(/\s+/g, ''));
        }

        // Language toggle functions
        function toggleLanguage() {
            if (currentLanguage === 'english') {
                currentLanguage = 'hindi';
                document.getElementById('langToggleText').textContent = 'Switch to English';
                ErrorHandler.announceToScreenReader('Language switched to Hindi');
            } else {
                currentLanguage = 'english';
                document.getElementById('langToggleText').textContent = 'हिंदी में बदलें';
                ErrorHandler.announceToScreenReader('Language switched to English');
            }
        }
        
        function setOutputLanguage(lang) {
            outputLanguage = lang;
            
            // Update button styles and ARIA attributes
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                btn.setAttribute('aria-pressed', 'false');
            });
            
            const activeButton = document.getElementById(lang + 'Btn') || 
                                document.getElementById('bilingualBtn');
            if (activeButton) {
                activeButton.classList.add('active');
                activeButton.setAttribute('aria-pressed', 'true');
            }
            
            const langNames = {
                'english': 'English',
                'hindi': 'Hindi', 
                'bilingual': 'Bilingual'
            };
            
            ErrorHandler.announceToScreenReader(`Output language set to ${langNames[lang]}`);
        }

        // Main complaint generation function
        async function generateComplaint() {
            try {
                showLoading(true);
                
                // Validate form
                if (!validateForm()) {
                    showLoading(false);
                    return;
                }
                
                // Get form data
                const formData = collectFormData();
                
                // Generate complaint based on selected language
                let complaint = '';
                switch (outputLanguage) {
                    case 'english':
                        complaint = generateEnglishComplaint(formData);
                        break;
                    case 'hindi':
                        complaint = generateHindiComplaint(formData);
                        break;
                    case 'bilingual':
                        complaint = generateBilingualComplaint(formData);
                        break;
                }
                
                // Display result
                displayComplaint(complaint);
                
                const successMsg = currentLanguage === 'hindi' ? 
                    'शिकायत सफलतापूर्वक तैयार की गई!' : 
                    'Complaint generated successfully!';
                ErrorHandler.showSuccess(successMsg, currentLanguage === 'hindi');
                
                showLoading(false);
                
            } catch (error) {
                console.error('Error generating complaint:', error);
                const errorMsg = currentLanguage === 'hindi' ? 
                    'शिकायत तैयार करने में त्रुटि हुई। कृपया पुनः प्रयास करें।' : 
                    'Error generating complaint. Please try again.';
                ErrorHandler.showError(errorMsg, currentLanguage === 'hindi');
                showLoading(false);
            }
        }

        function showLoading(show) {
            const spinner = document.getElementById('loadingSpinner');
            const button = document.querySelector('.generate-btn');
            
            if (show) {
                spinner.style.display = 'block';
                button.disabled = true;
                button.setAttribute('aria-busy', 'true');
            } else {
                spinner.style.display = 'none';
                button.disabled = false;
                button.setAttribute('aria-busy', 'false');
            }
        }

        function validateForm() {
            const requiredFields = [
                'complainantName', 'complainantAge', 'complainantAddress', 
                'complainantPhone', 'incidentDate', 'incidentLocation', 
                'incidentDescription', 'policeStation'
            ];
            
            let isValid = true;
            const errors = [];
            
            for (const fieldId of requiredFields) {
                const field = document.getElementById(fieldId);
                const value = field.value.trim();
                
                if (!value) {
                    field.setAttribute('aria-invalid', 'true');
                    field.style.borderColor = 'var(--error-color)';
                    field.focus();
                    isValid = false;
                    
                    const label = document.querySelector(`label[for="${fieldId}"]`);
                    if (label) {
                        errors.push(label.textContent.replace('*', '').trim());
                    }
                    break;
                }
            }

            // Check if at least one harassment type is selected (FIXED)
            const harassmentTypes = document.querySelectorAll('input[name="harassmentType"]:checked');
            if (harassmentTypes.length === 0) {
                const errorMsg = currentLanguage === 'hindi' ? 
                    'कृपया कम से कम एक उत्पीड़न प्रकार चुनें।' : 
                    'Please select at least one type of harassment.';
                ErrorHandler.showError(errorMsg, currentLanguage === 'hindi');
                document.getElementById('verbal').focus();
                showLoading(false);
                return false;
            }
            
            if (!isValid) {
                const errorMsg = currentLanguage === 'hindi' ? 
                    `कृपया आवश्यक फ़ील्ड भरें: ${errors[0]}` : 
                    `Please fill required field: ${errors[0]}`;
                ErrorHandler.showError(errorMsg, currentLanguage === 'hindi');
            }
            
            return isValid;
        }

        function collectFormData() {
            return {
                complainantName: document.getElementById('complainantName').value.trim(),
                complainantAge: document.getElementById('complainantAge').value,
                complainantAddress: document.getElementById('complainantAddress').value.trim(),
                complainantPhone: document.getElementById('complainantPhone').value.trim(),
                complainantEmail: document.getElementById('complainantEmail').value.trim() || 'Not provided',
                complainantOccupation: document.getElementById('complainantOccupation').value.trim() || 'Not specified',
                accusedName: document.getElementById('accusedName').value.trim() || 'Unknown Person',
                relationship: document.getElementById('relationship').value,
                accusedAddress: document.getElementById('accusedAddress').value.trim() || 'Unknown',
                incidentDate: document.getElementById('incidentDate').value,
                incidentTime: document.getElementById('incidentTime').value || 'Not specified',
                incidentLocation: document.getElementById('incidentLocation').value.trim(),
                ongoingHarassment: document.getElementById('ongoingHarassment').value,
                incidentDescription: document.getElementById('incidentDescription').value.trim(),
                previousIncidents: document.getElementById('previousIncidents').value.trim(),
                witnesses: document.getElementById('witnesses').value.trim() || 'None',
                policeStation: document.getElementById('policeStation').value.trim(),
                policeStationAddress: document.getElementById('policeStationAddress').value.trim(),
                harassmentTypes: getSelectedCheckboxes('input[name="harassmentType"]:checked'),
                evidenceTypes: getSelectedCheckboxes('input[name="evidence"]:checked')
            };
        }

        function getSelectedCheckboxes(selector) {
            return Array.from(document.querySelectorAll(selector)).map(cb => cb.value);
        }

        function generateEnglishComplaint(data) {
            const currentDate = new Date().toLocaleDateString('en-IN');
            const incidentDateFormatted = new Date(data.incidentDate).toLocaleDateString('en-IN');
            
            return `To,
The Station House Officer,
${data.policeStation}${data.policeStationAddress ? '\n' + data.policeStationAddress : ''}

Date: ${currentDate}

Subject: Complaint regarding harassment case - Request for registration of FIR

Respected Sir/Madam,

I, ${data.complainantName}, aged ${data.complainantAge} years, residing at ${data.complainantAddress}, contact number ${data.complainantPhone}, email: ${data.complainantEmail}, occupation: ${data.complainantOccupation}, hereby lodge this complaint regarding harassment incident(s) that occurred against me.

DETAILS OF THE ACCUSED:
Name: ${data.accusedName}
Relationship to complainant: ${data.relationship || 'Unknown'}
Address: ${data.accusedAddress}

INCIDENT DETAILS:
Date of ${data.ongoingHarassment === 'yes' ? 'first' : ''} incident: ${incidentDateFormatted}
Time: ${data.incidentTime}
Location: ${data.incidentLocation}
${data.ongoingHarassment === 'yes' ? 'Nature: This is part of ongoing harassment.' : 'Nature: Single incident.'}

TYPE OF HARASSMENT:
${data.harassmentTypes.length > 0 ? data.harassmentTypes.map(type => `- ${type.charAt(0).toUpperCase() + type.slice(1)} harassment`).join('\n') : 'Not specified'}

DETAILED DESCRIPTION OF THE INCIDENT:
${data.incidentDescription}

${data.previousIncidents ? `PREVIOUS INCIDENTS:\n${data.previousIncidents}\n` : ''}

WITNESSES:
${data.witnesses}

EVIDENCE AVAILABLE:
${data.evidenceTypes.length > 0 ? data.evidenceTypes.map(type => `- ${type.charAt(0).toUpperCase() + type.slice(1)}`).join('\n') : 'Will be submitted as required'}

APPLICABLE SECTIONS:
Based on the nature of harassment described above, the following sections may be applicable:
- Section 354A IPC (Sexual Harassment)
- Section 354D IPC (Stalking)
- Section 509 IPC (Word, gesture or act intended to insult modesty of a woman)
- Section 506 IPC (Criminal Intimidation)
- IT Act 2000 Section 67 (if cyber harassment involved)
- Any other applicable sections as deemed fit by the investigating officer

PRAYER:
I therefore request you to:
1. Register an FIR against the accused person(s)
2. Conduct a thorough investigation into the matter
3. Take appropriate legal action against the accused
4. Provide me with a copy of the FIR
5. Ensure my safety and security during the investigation

I am ready to cooperate with the investigation and provide any additional information or evidence as required.

I declare that the information provided above is true to the best of my knowledge and belief.

Yours faithfully,

${data.complainantName}
(Complainant)
Contact: ${data.complainantPhone}

Enclosures:
- Identity proof copy
- Address proof copy
- Evidence documents (if any)
- Any other relevant documents

Note: This complaint may also be sent via registered post/email for record purposes.`;
        }

        // FIXED: Complete Hindi complaint function
        function generateHindiComplaint(data) {
            const currentDate = new Date().toLocaleDateString('hi-IN');
            const incidentDateFormatted = new Date(data.incidentDate).toLocaleDateString('hi-IN');
            
            return `सेवा में,
थाना प्रभारी,
${data.policeStation}${data.policeStationAddress ? '\n' + data.policeStationAddress : ''}

दिनांक: ${currentDate}

विषय: उत्पीड़न मामले की शिकायत - एफआईआर दर्ज करने का अनुरोध

आदरणीय महोदय/महोदया,

मैं, ${data.complainantName}, आयु ${data.complainantAge} वर्ष, निवासी ${data.complainantAddress}, संपर्क नंबर ${data.complainantPhone}, ईमेल: ${data.complainantEmail}, व्यवसाय: ${data.complainantOccupation}, एतद्द्वारा अपने विरुद्ध हुई उत्पीड़न की घटना(ओं) की शिकायत दर्ज कराता/कराती हूं।

आरोपी का विवरण:
नाम: ${data.accusedName}
शिकायतकर्ता से संबंध: ${data.relationship || 'अज्ञात'}
पता: ${data.accusedAddress}

घटना का विवरण:
${data.ongoingHarassment === 'yes' ? 'पहली' : ''} घटना की तारीख: ${incidentDateFormatted}
समय: ${data.incidentTime}
स्थान: ${data.incidentLocation}
${data.ongoingHarassment === 'yes' ? 'प्रकृति: यह निरंतर उत्पीड़न का हिस्सा है।' : 'प्रकृति: एकल घटना।'}

उत्पीड़न का प्रकार:
${data.harassmentTypes.length > 0 ? data.harassmentTypes.map(type => `- ${harassmentTypesHindi[type] || type}`).join('\n') : 'निर्दिष्ट नहीं'}

घटना का विस्तृत विवरण:
${data.incidentDescription}

${data.previousIncidents ? `पूर्व घटनाएं:\n${data.previousIncidents}\n` : ''}

गवाह:
${data.witnesses}

उपलब्ध साक्ष्य:
${data.evidenceTypes.length > 0 ? data.evidenceTypes.map(type => `- ${evidenceTypesHindi[type] || type}`).join('\n') : 'आवश्यकतानुसार प्रस्तुत किए जाएंगे'}

लागू धाराएं:
ऊपर वर्णित उत्पीड़न की प्रकृति के आधार पर, निम्नलिखित धाराएं लागू हो सकती हैं:
- धारा 354क आईपीसी (यौन उत्पीड़न)
- धारा 354घ आईपीसी (पीछा करना)
- धारा 509 आईपीसी (किसी महिला की मर्यादा भंग करने के उद्देश्य से शब्द, हावभाव या कृत्य)
- धारा 506 आईपीसी (आपराधिक धमकी)
- आईटी अधिनियम 2000 की धारा 67 (यदि साइबर उत्पीड़न शामिल हो)
- अन्य कोई भी लागू धाराएं जो अन्वेषण अधिकारी द्वारा उपयुक्त समझी जाएं

प्रार्थना:
अतः मैं आपसे निवेदन करता/करती हूं कि:
1. आरोपी व्यक्ति(यों) के विरुद्ध एफआईआर दर्ज करें
2. मामले की गहन जांच करवाएं
3. आरोपी के विरुद्ध उचित कानूनी कार्रवाई करें
4. मुझे एफआईआर की प्रति प्रदान करें
5. जांच के दौरान मेरी सुरक्षा सुनिश्चित करें

मैं जांच में सहयोग करने और आवश्यकतानुसार अतिरिक्त जानकारी या साक्ष्य प्रदान करने के लिए तैयार हूं।

मैं घोषणा करता/करती हूं कि ऊपर दी गई जानकारी मेरी जानकारी और विश्वास के अनुसार सत्य है।

आपका विश्वसनीय,

${data.complainantName}
(शिकायतकर्ता)
संपर्क: ${data.complainantPhone}

संलग्नक:
- पहचान प्रमाण की प्रति
- पता प्रमाण की प्रति
- साक्ष्य दस्तावेज़ (यदि कोई हो)
- अन्य कोई संबंधित दस्तावेज़

नोट: यह शिकायत रिकॉर्ड के उद्देश्य से पंजीकृत डाक/ईमेल द्वारा भी भेजी जा सकती है।`;
        }

        function generateBilingualComplaint(data) {
            const englishComplaint = generateEnglishComplaint(data);
            const hindiComplaint = generateHindiComplaint(data);
            
            return `${englishComplaint}

${'='.repeat(80)}

${hindiComplaint}`;
        }

        function displayComplaint(complaint) {
            const outputElement = document.getElementById('output');
            const complaintTextElement = document.getElementById('complaintText');
            
            complaintTextElement.textContent = complaint;
            outputElement.style.display = 'block';
            
            // Smooth scroll to output
            outputElement.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
            
            // Focus on the complaint text for screen readers
            setTimeout(() => {
                complaintTextElement.focus();
            }, 500);
        }

        function copyComplaint() {
            const complaintText = document.getElementById('complaintText').textContent;
            
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(complaintText).then(() => {
                    showCopySuccess();
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    fallbackCopyTextToClipboard(complaintText);
                });
            } else {
                fallbackCopyTextToClipboard(complaintText);
            }
        }

        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-999999px";
            textArea.style.top = "-999999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showCopySuccess();
            } catch (err) {
                console.error('Fallback: Oops, unable to copy', err);
                const errorMsg = currentLanguage === 'hindi' ? 
                    'कॉपी करने में असमर्थ। कृपया टेक्स्ट को मैन्युअल रूप से चुनें और कॉपी करें।' : 
                    'Unable to copy. Please select and copy the text manually.';
                ErrorHandler.showError(errorMsg, currentLanguage === 'hindi');
            }
            
            document.body.removeChild(textArea);
        }

        function showCopySuccess() {
            const copyButtons = document.querySelectorAll('.copy-btn');
            copyButtons[0].textContent = currentLanguage === 'hindi' ? 'कॉपी हो गया!' : 'Copied!';
            copyButtons[0].style.background = 'var(--success-color)';
            
            const successMsg = currentLanguage === 'hindi' ? 
                'शिकायत क्लिपबोर्ड में कॉपी हो गई!' : 
                'Complaint copied to clipboard!';
            ErrorHandler.showSuccess(successMsg, currentLanguage === 'hindi');
            
            setTimeout(() => {
                copyButtons[0].textContent = currentLanguage === 'hindi' ? 
                    'शिकायत कॉपी करें' : 'Copy Complaint';
                copyButtons[0].style.background = '';
            }, 2000);
        }

        function downloadComplaint() {
            const complaintText = document.getElementById('complaintText').textContent;
            const blob = new Blob([complaintText], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            const currentDate = new Date().toISOString().split('T')[0];
            const filename = `Police_Complaint_${currentDate}.txt`;
            
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            link.style.display = 'none';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            URL.revokeObjectURL(url);
            
            const successMsg = currentLanguage === 'hindi' ? 
                'शिकायत डाउनलोड हो गई!' : 
                'Complaint downloaded successfully!';
            ErrorHandler.showSuccess(successMsg, currentLanguage === 'hindi');
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'Enter':
                        if (e.target.tagName !== 'TEXTAREA') {
                            e.preventDefault();
                            generateComplaint();
                        }
                        break;
                    case 's':
                        if (document.getElementById('output').style.display !== 'none') {
                            e.preventDefault();
                            downloadComplaint();
                        }
                        break;
                    case 'c':
                        if (document.getElementById('output').style.display !== 'none' && e.shiftKey) {
                            e.preventDefault();
                            copyComplaint();
                        }
                        break;
                }
            }
        });

        // Auto-save form data (in memory only)
        let formDataCache = {};
        
        function saveFormData() {
            const formElements = document.querySelectorAll('#complaintForm input, #complaintForm textarea, #complaintForm select');
            formElements.forEach(element => {
                if (element.type === 'checkbox') {
                    formDataCache[element.id] = element.checked;
                } else {
                    formDataCache[element.id] = element.value;
                }
            });
        }

        function loadFormData() {
            Object.keys(formDataCache).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    if (element.type === 'checkbox') {
                        element.checked = formDataCache[key];
                    } else {
                        element.value = formDataCache[key];
                    }
                }
            });
        }

        // Save form data every 30 seconds
        setInterval(saveFormData, 30000);

        // Load form data on page refresh
        window.addEventListener('beforeunload', saveFormData);

        // Enhanced error recovery
        window.addEventListener('error', function(e) {
            console.error('Global error caught:', e.error);
            const errorMsg = currentLanguage === 'hindi' ? 
                'एक अप्रत्याशित त्रुटि हुई। कृपया पृष्ठ को रीफ्रेश करके पुनः प्रयास करें।' : 
                'An unexpected error occurred. Please refresh the page and try again.';
            ErrorHandler.showError(errorMsg, currentLanguage === 'hindi');
        });

        console.log('Police Complaint Generator loaded successfully!');
        console.log('Press Alt+L to toggle interface language');
        console.log('Press Ctrl+Enter to generate complaint');
        console.log('Press Ctrl+S to download complaint (when generated)');
        console.log('Press Ctrl+Shift+C to copy complaint (when generated)');
    </script>
</body>
</html>